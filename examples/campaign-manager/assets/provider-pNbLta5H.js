import{r as s,D as f,_ as b,j as v}from"./index-GHNuhSm3.js";import{P as C}from"./context-dBYAWwbw.js";const E=(t,r=!0)=>{const a=s.useRef([]),o=s.useRef(t),[n,l]=s.useState(null),i=s.useCallback(e=>{a.current.forEach(d=>d(e))},[]),u=s.useCallback(e=>{l(e)},[]);s.useEffect(()=>{const e=o.current;return e==null||e.addEventListener("message",i),e==null||e.addEventListener("error",u),()=>{r&&(e==null||e.terminate()),e==null||e.removeEventListener("message",i),e==null||e.removeEventListener("error",u)}},[r,u,i]);const p=s.useCallback(e=>{var d;try{(d=o.current)==null||d.postMessage(e)}catch(c){console.error("failed to dispatch message to worker:",c)}},[]),y=s.useCallback(e=>(a.current.push(e),()=>{a.current=a.current.filter(d=>d!==e)}),[]),g=s.useCallback(()=>{var e;(e=o.current)==null||e.terminate(),o.current=null},[]);return[p,y,g,n]},B=t=>{let r="pending",a;const o=t().then(n=>n()).then(n=>{r="success",a=n},n=>{r="error",a=n});return{read(){if(r==="pending")throw o;if(r==="error")throw a;return a},reset(){a&&r==="success"&&(a=null)}}},P=t=>({type:f.FilterBy,filtersBy:{dateRange:{...t||{}}}}),R=t=>({type:f.SearchBy,filtersBy:{searchBy:t}}),_=t=>({type:f.Paginate,nextPage:t}),w=t=>({type:f.Init,state:t}),A=()=>({type:f.Reset}),m={data:[],loading:!0,currentPage:1,total:0,count:0,filtersBy:{searchBy:"",dateRange:{start:"",end:""}}},x=(t=m,r)=>{var a,o,n,l,i,u,p,y;switch(r.type){case f.Init:return{...t,data:[...(t==null?void 0:t.data)||[],...((a=r.payload)==null?void 0:a.state)||[]],loading:!1,total:((o=r.payload)==null?void 0:o.total)||0,count:((n=r.payload)==null?void 0:n.count)||0};case f.Update:return{...t,data:((l=r.payload)==null?void 0:l.state)||[],loading:!1,total:((i=r.payload)==null?void 0:i.total)||0,count:((u=r.payload)==null?void 0:u.count)||0,currentPage:((p=r.payload)==null?void 0:p.currentPage)||1,filtersBy:((y=r.payload)==null?void 0:y.filtersBy)||t.filtersBy};default:return t}},S=B(()=>b(()=>import("./seed-HEOblWWP.js"),__vite__mapDeps([]),import.meta.url).then(t=>t.default||t).then(t=>()=>t)),k=t=>{const{worker:r}=t,[a,o]=E(r,!1),n=S.read(),[l,i]=s.useReducer(x,m),u=s.useCallback(c=>{i({type:c.data.type,payload:c.data})},[]);s.useEffect(()=>{var h;(!l.data||!((h=l.data)!=null&&h.length))&&a(w(n));const c=o(u);return()=>{c()}},[n,u,a,l.data,o]);const p=s.useCallback(c=>{a(P(c))},[a]),y=s.useCallback(c=>{a(R(c))},[a]),g=s.useCallback(c=>{a(_(c))},[a]),e=s.useCallback(()=>{a(A())},[a]),d=s.useMemo(()=>({state:l,onPageChange:g,onFilterByDate:p,onSearchBy:y,onClearFilters:e}),[e,p,g,y,l]);return v.jsx(C.Provider,{value:d,children:!l.loading&&t.children})},F=s.memo(k);export{F as CampaignProvider,F as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}